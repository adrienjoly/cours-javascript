<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- initialize google login api, for user authentication -->
    <meta name="google-signin-client_id" content="247219641427-ifeq88p7rgor9al5ksduds7ug0ba7djr.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <!-- Note: You can also specify your app's client ID with the client_id parameter of the gapi.auth2.init() method -->
    <script>
      function onSignIn(googleUser) {
        window.token = googleUser.getAuthResponse().id_token;
        (document.getElementById('tokenInput') || {}).value = token;
      }
    </script>
  </head>
  <body>
    <p>Connexion:
      <div class="g-signin2" data-onsuccess="onSignIn"></div>
      <a href="#" onclick="gapi.auth2.getAuthInstance().signOut(); return false;">Sign out</a>
    </p>
    <p>Twittez:</p>

    <!-- TODO: remplacer ce formulaire par l'envoi du message en AJAX -->

    <form id="formulaire" method="POST" action="/tweet">
      <input name="token" id="tokenInput" type="hidden">
      <input name="message" placeholder="Votre message" style="padding: 5px; margin: 10px 0;">
    </form>

    <!-- fin du TODO -->

  </body>
</html>
